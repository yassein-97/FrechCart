"use strict";(self.webpackChunkFrechCart=self.webpackChunkFrechCart||[]).push([[31],{7031:(C,a,i)=>{i.r(a),i.d(a,{ForgetPasswordComponent:()=>v});var m=i(6814),s=i(95),e=i(4769),_=i(3450),u=i(7163);function d(r,l){1&r&&(e.TgZ(0,"p",13),e._uU(1,"Email is required."),e.qZA())}function c(r,l){1&r&&(e.TgZ(0,"p",13),e._uU(1,"Please enter a valid email address."),e.qZA())}function g(r,l){if(1&r&&(e.TgZ(0,"div",11),e.YNc(1,d,2,0,"p",12),e.YNc(2,c,2,0,"p",12),e.qZA()),2&r){const o=e.oxw(2);let t,n;e.xp6(1),e.Q6J("ngIf",null==(t=o.forgetPassordForm.get("email"))||null==t.errors?null:t.errors.required),e.xp6(1),e.Q6J("ngIf",null==(n=o.forgetPassordForm.get("email"))||null==n.errors?null:n.errors.email)}}function p(r,l){if(1&r){const o=e.EpF();e.TgZ(0,"form",3)(1,"h3",4),e._uU(2,"please enter your email"),e.qZA(),e.TgZ(3,"div",5)(4,"label",6),e._uU(5,"email:"),e.qZA(),e._UZ(6,"input",7),e.YNc(7,g,3,2,"div",8),e.qZA(),e.TgZ(8,"p",9),e._uU(9,"we will send a code to your email"),e.qZA(),e.TgZ(10,"button",10),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.forgetPassword(n.forgetPassordForm))}),e._uU(11," Send Code "),e.qZA()()}if(2&r){const o=e.oxw();let t;e.Q6J("formGroup",o.forgetPassordForm),e.xp6(7),e.Q6J("ngIf",(null==(t=o.forgetPassordForm.get("email"))?null:t.touched)&&(null==(t=o.forgetPassordForm.get("email"))?null:t.errors)),e.xp6(3),e.Q6J("disabled",o.forgetPassordForm.invalid)}}function f(r,l){1&r&&(e.TgZ(0,"p",13),e._uU(1,"input is required."),e.qZA())}function w(r,l){if(1&r&&(e.TgZ(0,"div",11),e.YNc(1,f,2,0,"p",12),e.qZA()),2&r){const o=e.oxw(2);let t;e.xp6(1),e.Q6J("ngIf",null==(t=o.resetPasswordForm.get("resetCode"))||null==t.errors?null:t.errors.required)}}function h(r,l){if(1&r){const o=e.EpF();e.TgZ(0,"form",3)(1,"div",5)(2,"label",6),e._uU(3,"code:"),e.qZA(),e._UZ(4,"input",14),e.YNc(5,w,2,1,"div",8),e.qZA(),e.TgZ(6,"p",9),e._uU(7,"we will send you a code to your email"),e.qZA(),e.TgZ(8,"button",10),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.verfiyResetCode(n.resetPasswordForm))}),e._uU(9," verify "),e.qZA()()}if(2&r){const o=e.oxw();let t;e.Q6J("formGroup",o.resetPasswordForm),e.xp6(5),e.Q6J("ngIf",(null==(t=o.resetPasswordForm.get("resetCode"))?null:t.touched)&&(null==(t=o.resetPasswordForm.get("resetCode"))?null:t.errors)),e.xp6(3),e.Q6J("disabled",o.resetPasswordForm.invalid)}}function P(r,l){1&r&&(e.TgZ(0,"p",13),e._uU(1,"password is required."),e.qZA())}function x(r,l){1&r&&(e.TgZ(0,"p",13),e._uU(1,"Password must start with a capital letter,And contain numbers with min length 6 and max length 20"),e.qZA())}function F(r,l){if(1&r&&(e.TgZ(0,"div",11),e.YNc(1,P,2,0,"p",12),e.YNc(2,x,2,0,"p",12),e.qZA()),2&r){const o=e.oxw(2);let t,n;e.xp6(1),e.Q6J("ngIf",null==(t=o.loginForm.get("newPassword"))||null==t.errors?null:t.errors.required),e.xp6(1),e.Q6J("ngIf",null==(n=o.loginForm.get("newPassword"))||null==n.errors?null:n.errors.pattern)}}function Z(r,l){if(1&r){const o=e.EpF();e.TgZ(0,"form",15),e.NdJ("ngSubmit",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.newDataLogin())}),e.TgZ(1,"div",16)(2,"label",6),e._uU(3,"New Password:"),e.qZA(),e._UZ(4,"input",17),e.YNc(5,F,3,2,"div",8),e.qZA(),e.TgZ(6,"div",18)(7,"button",19),e._uU(8," Login "),e.qZA()()()}if(2&r){const o=e.oxw();let t;e.Q6J("formGroup",o.loginForm),e.xp6(5),e.Q6J("ngIf",(null==(t=o.loginForm.get("newPassword"))?null:t.touched)&&(null==(t=o.loginForm.get("newPassword"))?null:t.errors)),e.xp6(2),e.Q6J("disabled",o.loginForm.invalid)}}let v=(()=>{class r{constructor(o,t){this._AuthenticationService=o,this._Router=t,this.showFirststep=!0,this.showNextStep=!1,this.showfinalstep=!1,this.userEmail="",this.resetCode="",this.forgetPassordForm=new s.cw({email:new s.NI("",[s.kI.required,s.kI.email])}),this.resetPasswordForm=new s.cw({resetCode:new s.NI("",[s.kI.required])}),this.loginForm=new s.cw({newPassword:new s.NI("",[s.kI.required,s.kI.pattern(/^[A-Z][A-Za-z0-9]{6,20}$/)])})}forgetPassword(o){this._AuthenticationService.forgetPassword(o.get("email")?.value).subscribe({next:t=>{console.log(t),this.userEmail=o.get("email")?.value,"success"===t.statusMsg&&(this.showFirststep=!1,this.showNextStep=!0)},error:t=>{console.log(t)}})}verfiyResetCode(o){this._AuthenticationService.resetPassword(o.get("resetCode")?.value).subscribe({next:t=>{console.log(t),this.showNextStep=!1,this.showfinalstep=!0},error:t=>{console.log(this.resetCode),console.log(t)}})}newDataLogin(){let o=this.loginForm.value;o.email=this.userEmail,console.log(o),this._AuthenticationService.loginWithNewPassword(o).subscribe({next:t=>{console.log(t),t.token&&(localStorage.setItem("userToken",t.token),this._AuthenticationService.userLoginData.next(t.token),this._Router.navigate(["/home"]))},error:t=>{console.log(t)}})}static#e=this.\u0275fac=function(t){return new(t||r)(e.Y36(_.$),e.Y36(u.F0))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-forget-password"]],standalone:!0,features:[e.jDz],decls:4,vars:3,consts:[[1,"forget-password"],["class","bg-light mt-5 rounded-2 p-3",3,"formGroup",4,"ngIf"],["class","mt-4 bg-light mt-5 rounded-2 p-3",3,"formGroup","ngSubmit",4,"ngIf"],[1,"bg-light","mt-5","rounded-2","p-3",3,"formGroup"],[1,"text-center"],[1,"mt-3"],["for",""],["formControlName","email","type","email",1,"form-control"],["class","alert alert-danger p-2 mt-2",4,"ngIf"],[1,"mt-2","text-center"],[1,"bg-main","text-white","btn","mt-3","ms-auto","d-block",3,"disabled","click"],[1,"alert","alert-danger","p-2","mt-2"],["class","m-0",4,"ngIf"],[1,"m-0"],["formControlName","resetCode","type","text",1,"form-control"],[1,"mt-4","bg-light","mt-5","rounded-2","p-3",3,"formGroup","ngSubmit"],[1,""],["formControlName","newPassword","type","password",1,"form-control"],[1,"d-flex","justify-content-between"],[1,"bg-main","text-white","btn","mt-3","ms-auto","d-block",3,"disabled"]],template:function(t,n){1&t&&(e.TgZ(0,"section",0),e.YNc(1,p,12,3,"form",1),e.YNc(2,h,10,3,"form",1),e.YNc(3,Z,9,3,"form",2),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",n.showFirststep),e.xp6(1),e.Q6J("ngIf",n.showNextStep),e.xp6(1),e.Q6J("ngIf",n.showfinalstep))},dependencies:[m.ez,m.O5,s.u5,s._Y,s.Fj,s.JJ,s.JL,s.UX,s.sg,s.u],styles:[".forget-password[_ngcontent-%COMP%]{min-height:45vh}"]})}return r})()}}]);